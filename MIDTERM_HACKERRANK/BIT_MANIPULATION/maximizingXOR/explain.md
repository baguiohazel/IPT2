The maximum XOR value depends on the most significant bit where l and r differ.

So I XOR l and r to find that difference. Then I figure out how many bits are needed to represent that difference. The maximum XOR value will be a number with all those bits set to 1.